# 高级智能压电光催化反应装置控制系统 V1.0

## 项目概述
这是一个用于Arduino Mega 2560的高级智能压电光催化反应装置控制系统。系统集成了传感器融合、数字孪生仿真、智能控制算法和在线学习功能。

## 系统架构

## 功能特性
1. **多传感器数据融合** - 实时采集和处理多个传感器数据
2. **数字孪生仿真** - 基于物理模型和数据的系统状态预测
3. **自适应控制** - 支持多种控制模式和算法
4. **在线学习** - 基于强化学习的参数优化
5. **智能决策** - 多目标优化的控制决策
6. **远程监控** - 通过串口的系统状态监控

## 硬件要求
- Arduino Mega 2560
- 流量传感器
- 污染物传感器
- 光照传感器
- pH传感器
- 温度传感器
- 舵机（压电应力控制）
- 蜂鸣器（报警）

## 软件依赖
- Arduino IDE 1.8.13或更高版本
- Arduino库：
  - Servo (内置)
  - EEPROM (内置)

## 安装和使用
1. 克隆或下载本项目代码
2. 在Arduino IDE中打开`MainControl.ino`
3. 根据硬件连接修改`SystemConfig.h`中的引脚定义
4. 编译并上传到Arduino Mega 2560
5. 打开串口监视器（115200波特率）

## 串口命令
- `status` - 显示系统状态
- `mode <n>` - 切换控制模式（0-4）
- `calibrate` - 开始传感器校准
- `reset` - 重置系统
- `help` - 显示帮助信息

## 控制模式
0. **节能模式** - 优先降低能耗
1. **标准模式** - 平衡处理效果和能耗
2. **高效模式** - 优先提高处理效率
3. **冲击负荷模式** - 应对高浓度污染物
4. **维护模式** - 系统维护和校准

## 开发说明
### 代码结构
- 采用模块化设计，每个功能独立成模块
- 使用面向对象编程，提高代码复用性
- 配置与代码分离，便于系统配置

### 扩展开发
1. 添加新传感器：
   - 在`SystemConfig.h`中添加引脚定义
   - 在`SensorManager`中添加读取逻辑
   - 更新`SensorData`结构体

2. 添加新控制算法：
   - 在`ControlSystem`中添加算法实现
   - 在`ControlMode`中添加新模式
   - 更新决策逻辑

3. 添加通信协议：
   - 在`Communication`模块中添加新协议
   - 实现数据打包和解包
   - 添加错误处理

## 性能优化
- 使用非阻塞定时器，避免`delay()`函数
- 使用环形缓冲区管理历史数据
- 优化内存使用，避免内存碎片
- 使用查表法加速计算密集型操作

## 故障排除
1. **传感器读数异常**
   - 检查硬件连接
   - 运行校准程序
   - 检查供电电压

2. **控制效果不佳**
   - 检查PID参数
   - 验证传感器数据准确性
   - 检查执行器响应

3. **系统不稳定**
   - 检查电源稳定性
   - 验证代码逻辑
   - 检查内存使用情况

## 版本历史
- V1.0 (2025) - 模块化重构，添加WIFI模块

## 联系方式
如有问题或建议，请联系项目维护者。
